<analysis>
ğŸš— Car Diagnostics App â€” Compressed Fork Handoff (Authoritative)
Project: Car Diagnostics App
Path: /app/car-diagnostics-app
Stack: Vite + React + TypeScript
Architecture: STRICT separation â€” core logic is immutable
ğŸ”’ Non-Negotiable Rules
DO NOT modify anything in:
/src/core/*
/src/diagnostics/*
No new diagnostic rules
No scoring, safety, confidence, or measurement changes
UI is presentation + orchestration only
Engine decides outcomes; UI never does
If unsure â†’ add TODO, do not guess
âœ… Foundation State (This Fork Starts Here)
Diagnostic engine fully implemented and validated
Cross-family spillover logic verified (battery vs alternator)
Engine â†’ UI wiring functional
Vite preview configured (allowedHosts: true)
No backend; local-first design
ğŸš˜ Vehicle Profiles (Hard Gate)
Diagnosis cannot start without an active vehicle profile
Profile requires: Name, Make, Model
Multiple vehicles supported
Switching vehicles restores all state:
Observations
Results
Maintenance
Mileage
New profiles start empty
Clone profile supported (dev + advanced users)
ğŸ§  Observations System (Persistent Memory)
Observations persist per vehicle
Do not reset between diagnostic runs
User manually toggles on/off
Categorized (battery, brakes, suspension, HVAC, smells, etc.)
UNSURE / SKIP = neutral
Free-text â€œmemoryâ€ observations allowed
These feed diagnostics, but are not a forced Q&A flow
ğŸ” Diagnostic Flow
Uses persisted observations
Uses active vehicleId
Engine invocation unchanged
No random diagnosis
No dropdown-only diagnosis
Diagnosis reflects selected observations
âš ï¸ Safety Handling (Advisory, Not Blocking)
No hard overrides
App-level disclaimer: â€œUse diagnostics only while stationaryâ€
Safety content lives in a Safety panel / Results section
Safety guidance is informational only
No forced acknowledgments or flow interruption
ğŸ“Š Results + Context
Show:
Top hypothesis
Confidence band
Supporting observations
Context panel:
supports
Â± related
â€“ contradicts
Context never alters scoring
ğŸ’° Pro Features (Explicit + Warned)
Reduced-Weight / Exclusion Tool
Pro-only
Component-level, not system-level
(e.g., alternator, battery, caliper, fuel pump)
Per-run only, never permanent
Cannot affect safety-critical items
Warning required: â€œMay reduce accuracy or cause misdiagnosisâ€
ğŸ”„ Post-Result Actions
Button: â€œI think itâ€™s something elseâ€
Option 1: Re-run diagnosis excluding current top hypothesis
Option 2: Submit feedback to developer
Feedback payload includes:
Observations
Results
User notes
Results must be savable + exportable
Feedback/export works in V1 and is forward-compatible with V2
ğŸ”§ Maintenance + Mileage
Oil changes, brakes, component replacements
Rolling mileage average
Countdown to next service
Data persists per vehicle
âš™ï¸ Settings
Notifications
Seasonal reminders
Oil reminders
ğŸ§ª Execution Order (Strict)
Vehicle profiles (gate)
Observation persistence
Diagnostic wiring
Advisory safety UI
Results + context
Maintenance
Pro controls
Optional dev conveniences last
ğŸ›‘ Final Instruction
Implement continuously.
Do not pause or redesign unless a contract is violated.


ğŸ›‘ EMERGENT â€” DO NOT HALLUCINATE / ANTI-DRIFT GUARDRAIL
YOU ARE A BUILDER, NOT A DESIGNER.
This project already has:
A defined architecture
Locked diagnostic logic
Explicit UX intent
Known constraints
Your job is to assemble, not invent.
ğŸš« ABSOLUTELY FORBIDDEN
Do NOT invent diagnostic logic, heuristics, weights, or rules
Do NOT infer missing behavior
Do NOT â€œimproveâ€ logic
Do NOT refactor for elegance
Do NOT redesign UX flows unless explicitly instructed
Do NOT replace elimination flows with dropdowns or shortcuts
Do NOT generate â€œreasonable assumptionsâ€
Do NOT simulate intelligence or reasoning not present in the codebase
If you are unsure â†’ STOP and leave a TODO comment.
ğŸ”’ IMMUTABLE DIRECTORIES
You may not modify or reinterpret anything inside:
Copy code

/src/core/*
/src/diagnostics/*
These directories are authoritative truth.
UI may only consume outputs from these modules.
ğŸ§  DECISION AUTHORITY
Diagnostic outcomes are decided only by the engine
UI never:
Decides diagnoses
Filters hypotheses
Alters confidence
Applies weights
UI may only:
Display
Persist
Forward user selections
ğŸ§ª WHEN INFORMATION IS MISSING
If a requirement is unclear:
Do NOT guess
Do NOT fill gaps
Insert a TODO explaining what is missing
Continue with the rest of the implementation
Partial correctness is preferred over creative completion.
âš ï¸ FAILURE MODES TO AVOID
If you do any of the following, you have failed:
Introduce random or â€œquickâ€ diagnosis paths
Replace question-driven flow with dropdown diagnosis
Add logic inside UI components
Create safety behavior not explicitly described
â€œHelpâ€ the user by simplifying rules
This system values determinism over convenience.
ğŸ§© IMPLEMENTATION STYLE
Build incrementally
Follow stated execution order exactly
Preserve existing contracts
Leave evidence in code comments when uncertain
Never silently change behavior
ğŸ›‘ OVERRIDE CLAUSE
If at any point you believe:
â€œThe user probably meantâ€¦â€
Stop.
That thought is invalid.
Only implement what is written.
âœ… SUCCESS CONDITION
You are successful when:
The app behaves exactly as specified
The logic matches the existing engine
The UX reflects user intent, not agent preference
No hidden behavior exists
BEGIN WORK ONLY AFTER ACKNOWLEDGING THIS BLOCK.
</analysis>
